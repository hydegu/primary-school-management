# å°å­¦æ•™åŠ¡ç®¡ç†ç³»ç»Ÿ - APIæ¥å£æ–‡æ¡£ï¼ˆæ•´åˆç‰ˆï¼‰

> **æ–‡æ¡£ç‰ˆæœ¬**: v2.2
> **æœ€åæ›´æ–°**: 2025-11-19
> **é¡¹ç›®çŠ¶æ€**: å¼€å‘ä¸­ ğŸš§

---

## ğŸ“Œ æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£æ•´åˆäº†å°å­¦æ•™åŠ¡ç®¡ç†ç³»ç»Ÿçš„æ‰€æœ‰APIæ¥å£è®¾è®¡ï¼Œå¹¶**å‡†ç¡®æ ‡æ³¨**äº†å½“å‰çš„å®ç°çŠ¶æ€ã€‚

**å›¾ä¾‹è¯´æ˜**ï¼š
- âœ… **å·²å®ç°** - æ¥å£å·²å®Œæˆå¼€å‘å¹¶å¯æ­£å¸¸ä½¿ç”¨
- âš ï¸ **éƒ¨åˆ†å®ç°** - æ¥å£å·²å¼€å‘ä½†åŠŸèƒ½ä¸å®Œæ•´æˆ–å­˜åœ¨é—®é¢˜
- ğŸš§ **æœªå®ç°** - æ¥å£è®¾è®¡å·²ç¡®å®šï¼Œä½†å°šæœªå¼€å‘

**å½“å‰å®é™…å®ç°è¿›åº¦**ï¼š
- **ç³»ç»Ÿç®¡ç†æ¨¡å—**ï¼š90% (19/21 æ¥å£å·²å®ç°) â¬†ï¸
- **æ•™åŠ¡æ ¸å¿ƒæ¨¡å—**ï¼š35% (14/40 æ¥å£å·²å®ç°)
- **ä¸šåŠ¡æµç¨‹æ¨¡å—**ï¼š20% (5/25 æ¥å£å·²å®ç°)
- **æ€»ä½“è¿›åº¦**ï¼š44% (38/86 æ¥å£å·²å®ç°) â¬†ï¸

---

## ğŸ“‹ ç›®å½•

- [ä¸€ã€ç³»ç»Ÿç®¡ç†æ¨¡å—](#ä¸€ç³»ç»Ÿç®¡ç†æ¨¡å—)
  - [1.1 ç”¨æˆ·è®¤è¯æ¥å£](#11-ç”¨æˆ·è®¤è¯æ¥å£)
  - [1.2 ç”¨æˆ·ç®¡ç†æ¥å£](#12-ç”¨æˆ·ç®¡ç†æ¥å£)
  - [1.3 è§’è‰²ç®¡ç†æ¥å£](#13-è§’è‰²ç®¡ç†æ¥å£)
  - [1.4 èœå•ç®¡ç†æ¥å£](#14-èœå•ç®¡ç†æ¥å£)
- [äºŒã€æ•™åŠ¡æ ¸å¿ƒæ¨¡å—](#äºŒæ•™åŠ¡æ ¸å¿ƒæ¨¡å—)
  - [2.1 æ•™å¸ˆç®¡ç†æ¥å£](#21-æ•™å¸ˆç®¡ç†æ¥å£)
  - [2.2 å­¦ç”Ÿç®¡ç†æ¥å£](#22-å­¦ç”Ÿç®¡ç†æ¥å£)
  - [2.3 ç­çº§ç®¡ç†æ¥å£](#23-ç­çº§ç®¡ç†æ¥å£)
  - [2.4 å¹´çº§ç®¡ç†æ¥å£](#24-å¹´çº§ç®¡ç†æ¥å£)
  - [2.5 ç§‘ç›®ç®¡ç†æ¥å£](#25-ç§‘ç›®ç®¡ç†æ¥å£)
  - [2.6 è¯¾ç¨‹ç®¡ç†æ¥å£](#26-è¯¾ç¨‹ç®¡ç†æ¥å£)
  - [2.7 æ’è¯¾ç®¡ç†æ¥å£](#27-æ’è¯¾ç®¡ç†æ¥å£)
- [ä¸‰ã€ä¸šåŠ¡æµç¨‹æ¨¡å—](#ä¸‰ä¸šåŠ¡æµç¨‹æ¨¡å—)
  - [3.1 è¯·å‡ç”³è¯·æ¥å£](#31-è¯·å‡ç”³è¯·æ¥å£)
  - [3.2 è°ƒè¯¾ç”³è¯·æ¥å£](#32-è°ƒè¯¾ç”³è¯·æ¥å£)
  - [3.3 æ¢è¯¾ç”³è¯·æ¥å£](#33-æ¢è¯¾ç”³è¯·æ¥å£)
  - [3.4 è°ƒç­ç”³è¯·æ¥å£](#34-è°ƒç­ç”³è¯·æ¥å£)
  - [3.5 å®¡æ‰¹æµç¨‹æ¥å£](#35-å®¡æ‰¹æµç¨‹æ¥å£)

---

## ä¸€ã€ç³»ç»Ÿç®¡ç†æ¨¡å—

### 1.1 ç”¨æˆ·è®¤è¯æ¥å£

#### 1.1.1 ç”¨æˆ·ç™»å½• âœ…

**æ¥å£åœ°å€**: `POST /api/user/login`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: ç”¨æˆ·ç™»å½•éªŒè¯ï¼ŒæˆåŠŸåè¿”å›JWT Token

**è¯·æ±‚å‚æ•°**:
```json
{
  "identifier": "admin",      // ç”¨æˆ·åæˆ–æ‰‹æœºå·æˆ–é‚®ç®±
  "password": "admin123"      // å¯†ç 
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "dataset": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."  // JWT Token
}
```

**å®ç°ä½ç½®**: `UserController.java:50`

---

#### 1.1.2 ç”¨æˆ·ç™»å‡º âœ…

**æ¥å£åœ°å€**: `POST /api/user/logout`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: ç”¨æˆ·ç™»å‡ºï¼Œå°†TokenåŠ å…¥é»‘åå•

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <token>
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "ç™»å‡ºæˆåŠŸ"
}
```

**å®ç°ä½ç½®**: `UserController.java:80`

---

#### 1.1.5 è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ ğŸš§

**æ¥å£åœ°å€**: `GET /api/user/profile`

**å®ç°çŠ¶æ€**: ğŸš§ æœªå®ç°

**æœªå®ç°åŸå› **:
- âš ï¸ éœ€è¦ä»Tokenä¸­è§£æç”¨æˆ·ID
- âš ï¸ éœ€è¦å…³è”æŸ¥è¯¢è§’è‰²å’Œæƒé™ä¿¡æ¯

---

### 1.2 ç”¨æˆ·ç®¡ç†æ¥å£

#### 1.2.1 ç”¨æˆ·åˆ—è¡¨æŸ¥è¯¢ âœ…

**æ¥å£åœ°å€**: `GET /api/users`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ï¼Œæ”¯æŒæ¡ä»¶ç­›é€‰å’Œåˆ†é¡µ

**å®ç°ä½ç½®**: `UserManagementController.java:73`

**è¯·æ±‚å‚æ•°**:
```
username=admin&userType=1&status=1&page=1&size=10
```

**è¯·æ±‚å‚æ•°è¯´æ˜**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| username | String | å¦ | ç”¨æˆ·åï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼‰ |
| realName | String | å¦ | çœŸå®å§“åï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼‰ |
| userType | Integer | å¦ | ç”¨æˆ·ç±»å‹ï¼š1-ç®¡ç†å‘˜ 2-æ•™å¸ˆ 3-å­¦ç”Ÿ 4-å®¶é•¿ |
| status | Integer | å¦ | çŠ¶æ€ï¼š0-ç¦ç”¨ 1-å¯ç”¨ |
| phone | String | å¦ | æ‰‹æœºå·ï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼‰ |
| email | String | å¦ | é‚®ç®±ï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼‰ |
| page | Integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| size | Integer | å¦ | æ¯é¡µæ¡æ•°ï¼Œé»˜è®¤10 |

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": {
    "total": 100,
    "page": 1,
    "size": 10,
    "pages": 10,
    "list": [
      {
        "id": 1,
        "username": "admin",
        "realName": "ç³»ç»Ÿç®¡ç†å‘˜",
        "userType": 1,
        "avatar": "http://example.com/avatar.jpg",
        "phone": "13800138000",
        "email": "admin@example.com",
        "gender": 1,
        "status": 1,
        "lastLoginTime": "2024-11-18 10:30:00",
        "createdAt": "2024-01-01 00:00:00",
        "updatedAt": "2024-11-18 10:30:00",
        "roles": ["super_admin"]
      }
    ]
  }
}
```

**å·²å®ç°åŠŸèƒ½**:
- âœ… æ”¯æŒ6ç§æ¡ä»¶ç­›é€‰ï¼ˆç”¨æˆ·åã€å§“åã€ç±»å‹ã€çŠ¶æ€ã€æ‰‹æœºã€é‚®ç®±ï¼‰
- âœ… åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½
- âœ… è‡ªåŠ¨å…³è”æŸ¥è¯¢ç”¨æˆ·è§’è‰²
- âœ… è¿”å›å®Œæ•´çš„åˆ†é¡µä¿¡æ¯

---

#### 1.2.2 æ·»åŠ ç”¨æˆ· âœ…

**æ¥å£åœ°å€**: `POST /api/users`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: æ·»åŠ æ–°ç”¨æˆ·ï¼ˆç®¡ç†å‘˜ã€æ•™å¸ˆã€å­¦ç”Ÿã€å®¶é•¿ï¼‰

**å®ç°ä½ç½®**: `UserManagementController.java:27`

**æƒé™è¦æ±‚**: `@PreAuthorize("hasRole('super_admin')")`

**è¯·æ±‚å‚æ•°**:
```json
{
  "username": "teacher001",
  "password": "Pass@123",
  "realName": "å¼ è€å¸ˆ",
  "userType": 2,
  "avatar": "http://example.com/avatar.jpg",
  "phone": "13800138001",
  "email": "teacher001@example.com",
  "gender": 1,
  "status": 1
}
```

**è¯·æ±‚å‚æ•°è¯´æ˜**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| username | String | æ˜¯ | ç™»å½•è´¦å·ï¼Œ3-50ä¸ªå­—ç¬¦ï¼Œå”¯ä¸€ |
| password | String | æ˜¯ | å¯†ç ï¼Œ6-20ä¸ªå­—ç¬¦ |
| realName | String | å¦ | çœŸå®å§“åï¼Œ1-50ä¸ªå­—ç¬¦ |
| userType | Integer | æ˜¯ | ç”¨æˆ·ç±»å‹ï¼š1-ç®¡ç†å‘˜ 2-æ•™å¸ˆ 3-å­¦ç”Ÿ 4-å®¶é•¿ |
| avatar | String | å¦ | å¤´åƒURL |
| phone | String | å¦ | è”ç³»ç”µè¯ï¼Œ11ä½æ‰‹æœºå· |
| email | String | å¦ | é‚®ç®±åœ°å€ |
| gender | Integer | å¦ | æ€§åˆ«ï¼š1-ç”· 2-å¥³ |
| status | Integer | å¦ | çŠ¶æ€ï¼š0-ç¦ç”¨ 1-å¯ç”¨ï¼Œé»˜è®¤1 |

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "æ·»åŠ æˆåŠŸ",
  "data": {
    "id": 10,
    "username": "teacher001",
    "realName": "å¼ è€å¸ˆ",
    "userType": 2,
    "status": 1,
    "createdAt": "2024-11-19 10:00:00"
  }
}
```

**å·²å®ç°åŠŸèƒ½**:
- âœ… ç”¨æˆ·åå”¯ä¸€æ€§éªŒè¯
- âœ… æ‰‹æœºå·å”¯ä¸€æ€§éªŒè¯
- âœ… é‚®ç®±å”¯ä¸€æ€§éªŒè¯
- âœ… å¯†ç BCryptåŠ å¯†
- âœ… è‡ªåŠ¨åˆ†é…é»˜è®¤è§’è‰²ï¼ˆæ ¹æ®userTypeï¼‰
- âœ… å‚æ•°æ ¡éªŒï¼ˆ@Validæ³¨è§£ï¼‰
- âœ… è¶…çº§ç®¡ç†å‘˜æƒé™æ§åˆ¶

**æ³¨æ„äº‹é¡¹**:
- å¯†ç ä½¿ç”¨BCryptç®—æ³•åŠ å¯†åå­˜å‚¨
- ç”¨æˆ·åã€æ‰‹æœºå·ã€é‚®ç®±å¿…é¡»å”¯ä¸€
- æ ¹æ®ç”¨æˆ·ç±»å‹è‡ªåŠ¨åˆ†é…é»˜è®¤è§’è‰²ï¼š
  - userType=1 â†’ super_admin
  - userType=2 â†’ teacher
  - userType=3 â†’ student

---

#### 1.2.3 ä¿®æ”¹ç”¨æˆ· âœ…

**æ¥å£åœ°å€**: `PUT /api/users/{id}`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ï¼ˆä¸åŒ…æ‹¬å¯†ç ï¼‰

**å®ç°ä½ç½®**: `UserManagementController.java:38`

**æƒé™è¦æ±‚**: `@PreAuthorize("hasRole('super_admin')")`

**è¯·æ±‚å‚æ•°**:
```json
{
  "realName": "å¼ è€å¸ˆ",
  "avatar": "http://example.com/new_avatar.jpg",
  "phone": "13800138002",
  "email": "newemail@example.com",
  "gender": 1,
  "status": 1
}
```

**è¯·æ±‚å‚æ•°è¯´æ˜**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| realName | String | å¦ | çœŸå®å§“å |
| avatar | String | å¦ | å¤´åƒURL |
| phone | String | å¦ | è”ç³»ç”µè¯ |
| email | String | å¦ | é‚®ç®±åœ°å€ |
| gender | Integer | å¦ | æ€§åˆ«ï¼š1-ç”· 2-å¥³ |
| status | Integer | å¦ | çŠ¶æ€ï¼š0-ç¦ç”¨ 1-å¯ç”¨ |

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "ä¿®æ”¹æˆåŠŸ",
  "data": {
    "id": 10,
    "username": "teacher001",
    "realName": "å¼ è€å¸ˆ",
    "userType": 2,
    "avatar": "http://example.com/new_avatar.jpg",
    "phone": "13800138002",
    "email": "newemail@example.com",
    "gender": 1,
    "status": 1,
    "updatedAt": "2024-11-19 11:00:00"
  }
}
```

**å·²å®ç°åŠŸèƒ½**:
- âœ… æ‰‹æœºå·å”¯ä¸€æ€§éªŒè¯
- âœ… é‚®ç®±å”¯ä¸€æ€§éªŒè¯
- âœ… å‚æ•°æ ¡éªŒï¼ˆ@Validæ³¨è§£ï¼‰
- âœ… ç¼“å­˜æ¸…é™¤
- âœ… è¶…çº§ç®¡ç†å‘˜æƒé™æ§åˆ¶

**æ³¨æ„äº‹é¡¹**:
- âœ… ä¸å…è®¸ä¿®æ”¹usernameï¼ˆç™»å½•è´¦å·ï¼‰
- âœ… ä¸å…è®¸ä¿®æ”¹userTypeï¼ˆç”¨æˆ·ç±»å‹ï¼‰
- å¯†ç ä¿®æ”¹è¯·ä½¿ç”¨ä¸“é—¨çš„ä¿®æ”¹å¯†ç æ¥å£
- ä¿®æ”¹æ‰‹æœºå·æˆ–é‚®ç®±æ—¶è‡ªåŠ¨éªŒè¯å”¯ä¸€æ€§

---

#### 1.2.4 åˆ é™¤ç”¨æˆ· âœ…

**æ¥å£åœ°å€**: `DELETE /api/users/{id}`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: åˆ é™¤ç”¨æˆ·ï¼ˆè½¯åˆ é™¤ï¼Œè®¾ç½®is_deleted=trueï¼‰

**å®ç°ä½ç½®**: `UserManagementController.java:49`

**æƒé™è¦æ±‚**: `@PreAuthorize("hasRole('super_admin')")`

**è¯·æ±‚å‚æ•°**:
- è·¯å¾„å‚æ•°ï¼š`id` - ç”¨æˆ·ID

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "åˆ é™¤æˆåŠŸ"
}
```

**å·²å®ç°åŠŸèƒ½**:
- âœ… è½¯åˆ é™¤ï¼ˆè®¾ç½®is_deleted=trueï¼‰
- âœ… ç¼“å­˜æ¸…é™¤
- âœ… è¶…çº§ç®¡ç†å‘˜ä¿æŠ¤ï¼ˆID=1ä¸”userType=1ä¸å¯åˆ é™¤ï¼‰
- âœ… åˆ é™¤ç”¨æˆ·è§’è‰²å…³è”
- âœ… è¶…çº§ç®¡ç†å‘˜æƒé™æ§åˆ¶

**æ³¨æ„äº‹é¡¹**:
- âœ… ä½¿ç”¨è½¯åˆ é™¤ï¼Œä¸ç‰©ç†åˆ é™¤æ•°æ®
- âœ… ä¸å…è®¸åˆ é™¤è¶…çº§ç®¡ç†å‘˜ï¼ˆID=1ï¼‰
- åˆ é™¤åè¯¥ç”¨æˆ·æ— æ³•ç™»å½•
- åˆ é™¤ä¼šåŒæ—¶åˆ é™¤ç”¨æˆ·è§’è‰²å…³è”å…³ç³»

---

#### 1.2.5 ç”¨æˆ·è¯¦æƒ… âœ…

**æ¥å£åœ°å€**: `GET /api/users/{id}`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: æŸ¥è¯¢ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬è§’è‰²ä¿¡æ¯

**å®ç°ä½ç½®**: `UserManagementController.java:60`

**è¯·æ±‚å‚æ•°**:
- è·¯å¾„å‚æ•°ï¼š`id` - ç”¨æˆ·ID

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": 10,
    "username": "teacher001",
    "realName": "å¼ è€å¸ˆ",
    "userType": 2,
    "avatar": "http://example.com/avatar.jpg",
    "phone": "13800138001",
    "email": "teacher001@example.com",
    "gender": 1,
    "status": 1,
    "lastLoginTime": "2024-11-19 09:30:00",
    "lastLoginIp": "192.168.1.100",
    "createdAt": "2024-11-01 10:00:00",
    "updatedAt": "2024-11-19 09:30:00",
    "roles": [
      {
        "roleId": 3,
        "roleName": "æ•™å¸ˆ",
        "roleCode": "teacher"
      }
    ]
  }
}
```

**å·²å®ç°åŠŸèƒ½**:
- âœ… æŸ¥è¯¢ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
- âœ… è‡ªåŠ¨å…³è”æŸ¥è¯¢ç”¨æˆ·è§’è‰²åˆ—è¡¨
- âœ… ä¸è¿”å›å¯†ç å­—æ®µ

**æ³¨æ„äº‹é¡¹**:
- âœ… ä¸è¿”å›å¯†ç å­—æ®µ
- âœ… è‡ªåŠ¨å…³è”æŸ¥è¯¢ç”¨æˆ·çš„è§’è‰²ä¿¡æ¯ï¼ˆroleså­—æ®µï¼‰
- å“åº”ä¸­åŒ…å«ç”¨æˆ·çš„æ‰€æœ‰è§’è‰²ç¼–ç åˆ—è¡¨

---

### 1.3 è§’è‰²ç®¡ç†æ¥å£

#### 1.3.1 è§’è‰²åˆ—è¡¨æŸ¥è¯¢ âœ…

**æ¥å£åœ°å€**: `GET /api/roles`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: è·å–æ‰€æœ‰è§’è‰²åˆ—è¡¨ï¼ˆæŒ‰æ’åºå’Œåˆ›å»ºæ—¶é—´æ’åºï¼‰

**å®ç°ä½ç½®**: `RoleController.java:77`

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": [
    {
      "id": 1,
      "roleName": "è¶…çº§ç®¡ç†å‘˜",
      "roleCode": "super_admin",
      "roleDesc": "æ‹¥æœ‰ç³»ç»Ÿæ‰€æœ‰æƒé™",
      "sortOrder": 1,
      "status": 1,
      "createdAt": "2024-01-01 00:00:00",
      "updatedAt": "2024-01-01 00:00:00"
    }
  ]
}
```

**å·²å®ç°åŠŸèƒ½**:
- âœ… æŸ¥è¯¢æ‰€æœ‰æœªåˆ é™¤çš„è§’è‰²
- âœ… æŒ‰sortOrderå’ŒcreatedAtæ’åº
- âœ… è¿”å›å®Œæ•´è§’è‰²ä¿¡æ¯

---

#### 1.3.2 æ·»åŠ è§’è‰² âœ…

**æ¥å£åœ°å€**: `POST /api/roles`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: åˆ›å»ºæ–°è§’è‰²

**å®ç°ä½ç½®**: `RoleController.java:30`

**æƒé™è¦æ±‚**: `@PreAuthorize("hasRole('super_admin')")`

**è¯·æ±‚å‚æ•°**:
```json
{
  "roleName": "æ•™åŠ¡ä¸»ä»»",
  "roleCode": "edu_director",
  "roleDesc": "è´Ÿè´£æ•™åŠ¡ç®¡ç†",
  "sortOrder": 10,
  "status": 1
}
```

**è¯·æ±‚å‚æ•°è¯´æ˜**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| roleName | String | æ˜¯ | è§’è‰²åç§°ï¼Œæœ€é•¿50å­—ç¬¦ |
| roleCode | String | æ˜¯ | è§’è‰²ç¼–ç ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ |
| roleDesc | String | å¦ | è§’è‰²æè¿°ï¼Œæœ€é•¿200å­—ç¬¦ |
| sortOrder | Integer | å¦ | æ˜¾ç¤ºæ’åºï¼Œé»˜è®¤0 |
| status | Integer | å¦ | çŠ¶æ€ï¼š0-ç¦ç”¨ 1-å¯ç”¨ï¼Œé»˜è®¤1 |

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": 10,
    "roleName": "æ•™åŠ¡ä¸»ä»»",
    "roleCode": "edu_director",
    "roleDesc": "è´Ÿè´£æ•™åŠ¡ç®¡ç†",
    "sortOrder": 10,
    "status": 1,
    "createdAt": "2024-11-19 10:00:00",
    "updatedAt": "2024-11-19 10:00:00"
  }
}
```

**å·²å®ç°åŠŸèƒ½**:
- âœ… è§’è‰²ç¼–ç å”¯ä¸€æ€§éªŒè¯
- âœ… è§’è‰²åç§°å”¯ä¸€æ€§éªŒè¯
- âœ… å‚æ•°æ ¡éªŒï¼ˆ@Validæ³¨è§£ï¼‰
- âœ… è¶…çº§ç®¡ç†å‘˜æƒé™æ§åˆ¶

---

#### 1.3.3 ä¿®æ”¹è§’è‰² âœ…

**æ¥å£åœ°å€**: `PUT /api/roles/{id}`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: æ›´æ–°è§’è‰²ä¿¡æ¯ï¼ˆä¸å¯ä¿®æ”¹roleCodeï¼‰

**å®ç°ä½ç½®**: `RoleController.java:42`

**æƒé™è¦æ±‚**: `@PreAuthorize("hasRole('super_admin')")`

**è¯·æ±‚å‚æ•°**:
```json
{
  "roleName": "æ•™åŠ¡å‰¯ä¸»ä»»",
  "roleDesc": "ååŠ©æ•™åŠ¡ç®¡ç†å·¥ä½œ",
  "sortOrder": 11,
  "status": 1
}
```

**å·²å®ç°åŠŸèƒ½**:
- âœ… è§’è‰²åç§°å”¯ä¸€æ€§éªŒè¯
- âœ… è¶…çº§ç®¡ç†å‘˜è§’è‰²ä¿æŠ¤ï¼ˆä¸å¯ä¿®æ”¹super_adminï¼‰
- âœ… å‚æ•°æ ¡éªŒ
- âœ… è¶…çº§ç®¡ç†å‘˜æƒé™æ§åˆ¶

**æ³¨æ„äº‹é¡¹**:
- âœ… ä¸å…è®¸ä¿®æ”¹super_adminè§’è‰²
- ä¸å…è®¸ä¿®æ”¹roleCodeå­—æ®µ

---

#### 1.3.4 åˆ é™¤è§’è‰² âœ…

**æ¥å£åœ°å€**: `DELETE /api/roles/{id}`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: åˆ é™¤è§’è‰²ï¼ˆè½¯åˆ é™¤ï¼Œéœ€æ£€æŸ¥ç”¨æˆ·å…³è”ï¼‰

**å®ç°ä½ç½®**: `RoleController.java:53`

**æƒé™è¦æ±‚**: `@PreAuthorize("hasRole('super_admin')")`

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "åˆ é™¤æˆåŠŸ"
}
```

**å·²å®ç°åŠŸèƒ½**:
- âœ… è½¯åˆ é™¤ï¼ˆè®¾ç½®is_deleted=trueï¼‰
- âœ… æ£€æŸ¥ç”¨æˆ·å…³è”ï¼ˆæœ‰ç”¨æˆ·æ—¶ä¸å¯åˆ é™¤ï¼‰
- âœ… è¶…çº§ç®¡ç†å‘˜è§’è‰²ä¿æŠ¤ï¼ˆä¸å¯åˆ é™¤super_adminï¼‰
- âœ… è¶…çº§ç®¡ç†å‘˜æƒé™æ§åˆ¶

**æ³¨æ„äº‹é¡¹**:
- âœ… ä¸å…è®¸åˆ é™¤super_adminè§’è‰²
- âœ… å¦‚æœè§’è‰²ä¸‹æœ‰ç”¨æˆ·ï¼Œå°†æç¤ºç”¨æˆ·æ•°é‡å¹¶æ‹’ç»åˆ é™¤

---

#### 1.3.5 è·å–è§’è‰²è¯¦æƒ… âœ…

**æ¥å£åœ°å€**: `GET /api/roles/{id}`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: æŸ¥è¯¢è§’è‰²è¯¦ç»†ä¿¡æ¯

**å®ç°ä½ç½®**: `RoleController.java:64`

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": 1,
    "roleName": "è¶…çº§ç®¡ç†å‘˜",
    "roleCode": "super_admin",
    "roleDesc": "æ‹¥æœ‰ç³»ç»Ÿæ‰€æœ‰æƒé™",
    "sortOrder": 1,
    "status": 1,
    "createdAt": "2024-01-01 00:00:00",
    "updatedAt": "2024-01-01 00:00:00"
  }
}
```

---

#### 1.3.6 è·å–è§’è‰²ä¸‹çš„ç”¨æˆ· âœ…

**æ¥å£åœ°å€**: `GET /api/roles/{id}/users`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: æŸ¥è¯¢æŒ‡å®šè§’è‰²ä¸‹çš„æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨

**å®ç°ä½ç½®**: `RoleController.java:88`

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": [
    {
      "id": 1,
      "username": "admin",
      "realName": "ç³»ç»Ÿç®¡ç†å‘˜",
      "userType": 1,
      "status": 1,
      "roles": ["super_admin"]
    }
  ]
}
```

**å·²å®ç°åŠŸèƒ½**:
- âœ… æŸ¥è¯¢è§’è‰²ä¸‹çš„æ‰€æœ‰ç”¨æˆ·
- âœ… è‡ªåŠ¨è¿‡æ»¤å·²åˆ é™¤çš„ç”¨æˆ·
- âœ… è¿”å›ç”¨æˆ·å®Œæ•´ä¿¡æ¯ï¼ˆå«è§’è‰²ï¼‰

---

#### 1.3.7 åˆ†é…è§’è‰²ç»™ç”¨æˆ· âœ…

**æ¥å£åœ°å€**: `POST /api/users/{id}/roles`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: ä¸ºç”¨æˆ·åˆ†é…è§’è‰²ï¼ˆæ”¯æŒå¤šè§’è‰²ï¼‰

**å®ç°ä½ç½®**: `UserManagementController.java:106`

**æƒé™è¦æ±‚**: `@PreAuthorize("hasRole('super_admin')")`

**è¯·æ±‚å‚æ•°**:
```json
{
  "roleIds": [2, 3, 4]
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "è§’è‰²åˆ†é…æˆåŠŸ"
}
```

**å·²å®ç°åŠŸèƒ½**:
- âœ… éªŒè¯ç”¨æˆ·æ˜¯å¦å­˜åœ¨
- âœ… éªŒè¯æ‰€æœ‰è§’è‰²æ˜¯å¦å­˜åœ¨
- âœ… å…ˆåˆ é™¤åŸæœ‰è§’è‰²ï¼Œå†åˆ†é…æ–°è§’è‰²
- âœ… äº‹åŠ¡æ”¯æŒ
- âœ… è¶…çº§ç®¡ç†å‘˜æƒé™æ§åˆ¶

---

#### 1.3.8 è·å–ç”¨æˆ·çš„è§’è‰²åˆ—è¡¨ âœ…

**æ¥å£åœ°å€**: `GET /api/users/{id}/roles`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: æŸ¥è¯¢ç”¨æˆ·çš„æ‰€æœ‰è§’è‰²ç¼–ç åˆ—è¡¨

**å®ç°ä½ç½®**: `UserManagementController.java:117`

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": ["super_admin", "teacher"]
}
```

---

### 1.4 èœå•ç®¡ç†æ¥å£

#### 1.4.1 è·å–èœå•æ ‘ âœ…

**æ¥å£åœ°å€**: `GET /api/menu/tree`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: è·å–èœå•æ ‘å½¢ç»“æ„ï¼Œæ”¯æŒé€’å½’æ„å»ºçˆ¶å­å…³ç³»

**å®ç°ä½ç½®**: `MenuController.java:30`

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": [
    {
      "id": 1,
      "parentId": 0,
      "menuName": "é¦–é¡µ",
      "menuCode": "home",
      "menuType": 1,
      "routePath": "/home",
      "componentPath": null,
      "permission": null,
      "icon": "home",
      "sortOrder": 1,
      "remark": null,
      "createdAt": "2025-11-15 10:13:40",
      "updatedAt": "2025-11-15 10:13:40",
      "children": null
    },
    {
      "id": 10,
      "parentId": 0,
      "menuName": "ç”¨æˆ·ç®¡ç†",
      "menuCode": "user_manage",
      "menuType": 1,
      "routePath": "/user",
      "icon": "user",
      "sortOrder": 10,
      "children": [
        {
          "id": 11,
          "parentId": 10,
          "menuName": "ç”¨æˆ·åˆ—è¡¨",
          "menuCode": "user_list",
          "menuType": 2,
          "routePath": "/user/list",
          "sortOrder": 1,
          "children": [
            {
              "id": 13,
              "parentId": 11,
              "menuName": "æ·»åŠ ç”¨æˆ·",
              "menuCode": "user_add",
              "menuType": 3,
              "routePath": "/user/list/reg",
              "sortOrder": 1,
              "children": null
            }
          ]
        }
      ]
    }
  ]
}
```

**å·²å®ç°åŠŸèƒ½**:
- âœ… é€’å½’æ„å»ºæ ‘å½¢ç»“æ„
- âœ… è‡ªåŠ¨æ’åºï¼ˆæŒ‰sortOrderå’Œidï¼‰
- âœ… è¿‡æ»¤å·²åˆ é™¤èœå•
- âœ… æ”¯æŒä¸‰çº§èœå•ï¼ˆç›®å½•-èœå•-æŒ‰é’®ï¼‰

---

#### 1.4.2 è·å–æ‰€æœ‰èœå•åˆ—è¡¨ âœ…

**æ¥å£åœ°å€**: `GET /api/menu/list`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: è·å–æ‰€æœ‰èœå•çš„æ‰å¹³åˆ—è¡¨ï¼ˆä¸å«æ ‘å½¢ç»“æ„ï¼‰

**å®ç°ä½ç½®**: `MenuController.java:39`

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": [
    {
      "id": 1,
      "parentId": 0,
      "menuName": "é¦–é¡µ",
      "menuCode": "home",
      "menuType": 1,
      "routePath": "/home",
      "icon": "home",
      "sortOrder": 1
    },
    {
      "id": 10,
      "parentId": 0,
      "menuName": "ç”¨æˆ·ç®¡ç†",
      "menuCode": "user_manage",
      "menuType": 1,
      "routePath": "/user",
      "icon": "user",
      "sortOrder": 10
    }
  ]
}
```

---

#### 1.4.3 è·å–èœå•è¯¦æƒ… âœ…

**æ¥å£åœ°å€**: `GET /api/menu/{id}`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: æ ¹æ®èœå•IDè·å–èœå•è¯¦ç»†ä¿¡æ¯

**å®ç°ä½ç½®**: `MenuController.java:48`

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": 10,
    "parentId": 0,
    "menuName": "ç”¨æˆ·ç®¡ç†",
    "menuCode": "user_manage",
    "menuType": 1,
    "routePath": "/user",
    "componentPath": null,
    "permission": null,
    "icon": "user",
    "sortOrder": 10,
    "remark": null,
    "createdAt": "2025-11-15 10:13:40",
    "updatedAt": "2025-11-15 10:13:40"
  }
}
```

---

#### 1.4.4 æ·»åŠ èœå• âœ…

**æ¥å£åœ°å€**: `POST /api/menu`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: åˆ›å»ºæ–°èœå•

**å®ç°ä½ç½®**: `MenuController.java:58`

**æƒé™è¦æ±‚**: `@PreAuthorize("hasRole('super_admin')")`

**è¯·æ±‚å‚æ•°**:
```json
{
  "parentId": 10,
  "menuName": "ç”¨æˆ·æƒé™",
  "menuCode": "user_permission",
  "menuType": 2,
  "routePath": "/user/permission",
  "componentPath": "/views/user/Permission.vue",
  "permission": "user:permission:view",
  "icon": "permission",
  "sortOrder": 3,
  "remark": "ç”¨æˆ·æƒé™ç®¡ç†é¡µé¢"
}
```

**è¯·æ±‚å‚æ•°è¯´æ˜**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| parentId | Long | æ˜¯ | çˆ¶èœå•IDï¼Œ0è¡¨ç¤ºé¡¶çº§èœå• |
| menuName | String | æ˜¯ | èœå•åç§°ï¼Œæœ€é•¿50å­—ç¬¦ |
| menuCode | String | å¦ | èœå•ç¼–ç ï¼Œæœ€é•¿50å­—ç¬¦ |
| menuType | Integer | æ˜¯ | èœå•ç±»å‹ï¼š1-ç›®å½• 2-èœå• 3-æŒ‰é’® |
| routePath | String | å¦ | è·¯ç”±åœ°å€ï¼Œæœ€é•¿200å­—ç¬¦ |
| componentPath | String | å¦ | ç»„ä»¶è·¯å¾„ï¼Œæœ€é•¿200å­—ç¬¦ |
| permission | String | å¦ | æƒé™æ ‡è¯†ï¼Œæœ€é•¿100å­—ç¬¦ |
| icon | String | å¦ | èœå•å›¾æ ‡ï¼Œæœ€é•¿100å­—ç¬¦ |
| sortOrder | Integer | å¦ | æ˜¾ç¤ºæ’åºï¼Œé»˜è®¤0 |
| remark | String | å¦ | å¤‡æ³¨ï¼Œæœ€é•¿500å­—ç¬¦ |

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": 100,
    "parentId": 10,
    "menuName": "ç”¨æˆ·æƒé™",
    "menuCode": "user_permission",
    "menuType": 2,
    "routePath": "/user/permission",
    "icon": "permission",
    "sortOrder": 3,
    "createdAt": "2025-11-19 15:00:00",
    "updatedAt": "2025-11-19 15:00:00"
  }
}
```

**å·²å®ç°åŠŸèƒ½**:
- âœ… èœå•ç¼–ç å”¯ä¸€æ€§éªŒè¯
- âœ… çˆ¶èœå•å­˜åœ¨æ€§éªŒè¯
- âœ… å‚æ•°æ ¡éªŒï¼ˆ@Validæ³¨è§£ï¼‰
- âœ… è¶…çº§ç®¡ç†å‘˜æƒé™æ§åˆ¶

---

#### 1.4.5 ä¿®æ”¹èœå• âœ…

**æ¥å£åœ°å€**: `PUT /api/menu/{id}`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: æ›´æ–°èœå•ä¿¡æ¯

**å®ç°ä½ç½®**: `MenuController.java:68`

**æƒé™è¦æ±‚**: `@PreAuthorize("hasRole('super_admin')")`

**è¯·æ±‚å‚æ•°**:
```json
{
  "parentId": 10,
  "menuName": "ç”¨æˆ·æƒé™ç®¡ç†",
  "menuType": 2,
  "routePath": "/user/permission",
  "icon": "lock",
  "sortOrder": 5
}
```

**å·²å®ç°åŠŸèƒ½**:
- âœ… é˜²æ­¢å°†èœå•çš„çˆ¶èœå•è®¾ç½®ä¸ºè‡ªå·±
- âœ… é˜²æ­¢å°†èœå•çš„çˆ¶èœå•è®¾ç½®ä¸ºè‡ªå·±çš„å­èœå•ï¼ˆé€’å½’æ£€æŸ¥ï¼‰
- âœ… çˆ¶èœå•å­˜åœ¨æ€§éªŒè¯
- âœ… å‚æ•°æ ¡éªŒ
- âœ… è¶…çº§ç®¡ç†å‘˜æƒé™æ§åˆ¶

**æ³¨æ„äº‹é¡¹**:
- âœ… ä¸å…è®¸ä¿®æ”¹menuCodeï¼ˆèœå•ç¼–ç ï¼‰
- âœ… ç§»åŠ¨èœå•æ—¶ä¼šè‡ªåŠ¨æ£€æŸ¥å¾ªç¯ä¾èµ–

---

#### 1.4.6 åˆ é™¤èœå• âœ…

**æ¥å£åœ°å€**: `DELETE /api/menu/{id}`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: åˆ é™¤èœå•ï¼ˆè½¯åˆ é™¤ï¼‰

**å®ç°ä½ç½®**: `MenuController.java:78`

**æƒé™è¦æ±‚**: `@PreAuthorize("hasRole('super_admin')")`

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "msg": "åˆ é™¤æˆåŠŸ"
}
```

**å·²å®ç°åŠŸèƒ½**:
- âœ… è½¯åˆ é™¤ï¼ˆè®¾ç½®is_deleted=trueï¼‰
- âœ… æ£€æŸ¥å­èœå•ï¼ˆæœ‰å­èœå•æ—¶ä¸å¯åˆ é™¤ï¼‰
- âœ… è¶…çº§ç®¡ç†å‘˜æƒé™æ§åˆ¶

**æ³¨æ„äº‹é¡¹**:
- âœ… å¦‚æœèœå•ä¸‹æœ‰å­èœå•ï¼Œå°†æç¤ºå…ˆåˆ é™¤å­èœå•
- âœ… ä½¿ç”¨è½¯åˆ é™¤ï¼Œä¸ç‰©ç†åˆ é™¤æ•°æ®

---

## äºŒã€æ•™åŠ¡æ ¸å¿ƒæ¨¡å—

### 2.1 æ•™å¸ˆç®¡ç†æ¥å£

#### 2.1.1 æ•™å¸ˆåˆ—è¡¨æŸ¥è¯¢ âœ…

**æ¥å£åœ°å€**: `GET /api/teacher/list`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: æŸ¥è¯¢æ•™å¸ˆåˆ—è¡¨ï¼Œæ”¯æŒæ¡ä»¶ç­›é€‰ï¼ˆå§“åã€å·¥å·ã€èŒç§°ï¼‰

**è¯·æ±‚å‚æ•°**:
```
teacherName=å¼ &teacherNo=T001&title=è¯­æ–‡æ•™å¸ˆ
```

**å®ç°ä½ç½®**: `TeacherController.java:28`

**å·²å®ç°åŠŸèƒ½**:
- âœ… æ”¯æŒå§“åæ¨¡ç³ŠæŸ¥è¯¢
- âœ… æ”¯æŒå·¥å·æŸ¥è¯¢
- âœ… æ”¯æŒèŒç§°æŸ¥è¯¢
- âš ï¸ æœªå®ç°åˆ†é¡µåŠŸèƒ½

---

#### 2.1.2 æ·»åŠ æ•™å¸ˆ âœ…

**æ¥å£åœ°å€**: `POST /api/teacher`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: æ·»åŠ æ–°æ•™å¸ˆä¿¡æ¯

**è¯·æ±‚å‚æ•°**:
```json
{
  "teacherNo": "T100",
  "teacherName": "æè€å¸ˆ",
  "gender": 1,
  "birthDate": "1985-03-15",
  "idCard": "110101198503150011",
  "phone": "13900139000",
  "email": "teacher100@school.com",
  "title": "æ•°å­¦æ•™å¸ˆ",
  "hireDate": "2024-09-01"
}
```

**å®ç°ä½ç½®**: `TeacherController.java:53`

**å·²å®ç°åŠŸèƒ½**:
- âœ… åŸºæœ¬ä¿¡æ¯æ·»åŠ 
- âš ï¸ æœªå®ç°æ•™å¸ˆç¼–å·å”¯ä¸€æ€§éªŒè¯
- âš ï¸ æœªè‡ªåŠ¨åˆ›å»ºå¯¹åº”çš„ sys_user è´¦å·
- âš ï¸ æœªè‡ªåŠ¨åˆ†é…æ•™å¸ˆè§’è‰²

---

#### 2.1.3 ä¿®æ”¹æ•™å¸ˆ âœ…

**æ¥å£åœ°å€**: `PUT /api/teacher/{id}`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**å®ç°ä½ç½®**: `TeacherController.java:61`

---

#### 2.1.4 åˆ é™¤æ•™å¸ˆ âœ…

**æ¥å£åœ°å€**: `DELETE /api/teacher/{id}`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**å®ç°ä½ç½®**: `TeacherController.java:57`

**å·²å®ç°åŠŸèƒ½**:
- âœ… åŸºæœ¬åˆ é™¤åŠŸèƒ½
- âš ï¸ æœªæ£€æŸ¥æ•™å¸ˆæ˜¯å¦æ‹…ä»»ç­ä¸»ä»»
- âš ï¸ æœªæ£€æŸ¥æ•™å¸ˆæ˜¯å¦æœ‰ä»»è¯¾è®°å½•
- âš ï¸ æœªä½¿ç”¨è½¯åˆ é™¤

---

#### 2.1.5 æ•™å¸ˆè¯¦æƒ… âš ï¸

**æ¥å£åœ°å€**: `GET /api/teacher/{id}`

**å®ç°çŠ¶æ€**: âš ï¸ éƒ¨åˆ†å®ç°ï¼ˆ**å­˜åœ¨BUG**ï¼‰

**å®ç°ä½ç½®**: `TeacherController.java:14`

**é—®é¢˜è¯´æ˜**:
- âŒ æ¥å£å®šä¹‰äº† `{id}` è·¯å¾„å‚æ•°ï¼Œä½†æ–¹æ³•å‚æ•°æ˜¯ `Teacher teacher`
- âŒ æ–¹æ³•ä½“è°ƒç”¨çš„æ˜¯ `teacherList()`ï¼Œè€Œä¸æ˜¯æ ¹æ®IDæŸ¥è¯¢
- âŒ éœ€è¦ä¿®å¤æ­¤æ¥å£

**å»ºè®®ä¿®å¤**:
```java
@GetMapping(value="/teacher/{id}")
public R getTeacherById(@PathVariable Integer id) {
    return this.teacherService.getTeacherById(id);
}
```

---

#### 2.1.6 æ•™å¸ˆè¯¾ç¨‹è¡¨ ğŸš§

**æ¥å£åœ°å€**: `GET /api/teacher/{id}/schedule`

**å®ç°çŠ¶æ€**: ğŸš§ æœªå®ç°

**æœªå®ç°åŸå› **:
- âš ï¸ éœ€è¦å…³è”æŸ¥è¯¢ `edu_schedule`ã€`edu_course`ã€`edu_subject` è¡¨
- âš ï¸ éœ€è¦å…ˆå®ç°æ’è¯¾ç®¡ç†æ¨¡å—

---

### 2.2 å­¦ç”Ÿç®¡ç†æ¥å£

#### 2.2.1 å­¦ç”Ÿåˆ—è¡¨æŸ¥è¯¢ âœ…

**æ¥å£åœ°å€**: `GET /api/student/list`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: æŸ¥è¯¢å­¦ç”Ÿåˆ—è¡¨ï¼Œæ”¯æŒæ¡ä»¶ç­›é€‰

**è¯·æ±‚å‚æ•°**: æ”¯æŒMapå‚æ•°ï¼ˆå…·ä½“å­—æ®µç”±Serviceå±‚å¤„ç†ï¼‰

**å®ç°ä½ç½®**: `StudentController.java:35`

**å·²å®ç°åŠŸèƒ½**:
- âœ… åŸºæœ¬åˆ—è¡¨æŸ¥è¯¢
- âœ… æ”¯æŒæ¡ä»¶ç­›é€‰
- âš ï¸ æœªæ˜ç¡®æ”¯æŒçš„æŸ¥è¯¢å­—æ®µ
- âš ï¸ æœªå®ç°åˆ†é¡µåŠŸèƒ½

---

#### 2.2.2 æ·»åŠ å­¦ç”Ÿ âœ…

**æ¥å£åœ°å€**: `POST /api/student`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: æ·»åŠ æ–°å­¦ç”Ÿ

**è¯·æ±‚å‚æ•°**:
```json
{
  "studentNo": "S2024001",
  "studentName": "å°æ˜",
  "gender": 1,
  "birthDate": "2016-05-20",
  "idCard": "110101201605200011",
  "gradeId": 1,
  "classId": 1,
  "parentPhone": "13800138000"
}
```

**å®ç°ä½ç½®**: `StudentController.java:22`

**å·²å®ç°åŠŸèƒ½**:
- âœ… åŸºæœ¬ä¿¡æ¯æ·»åŠ 
- âœ… å­¦å·å’Œå§“åå¿…å¡«éªŒè¯
- âš ï¸ æœªå®ç°å­¦å·å”¯ä¸€æ€§éªŒè¯
- âš ï¸ æœªè‡ªåŠ¨åˆ›å»ºå¯¹åº”çš„ sys_user è´¦å·
- âš ï¸ æœªæ›´æ–°ç­çº§å­¦ç”Ÿäººæ•°
- âš ï¸ æœªå…³è”å®¶é•¿ä¿¡æ¯

---

#### 2.2.3 ä¿®æ”¹å­¦ç”Ÿ âœ…

**æ¥å£åœ°å€**: `PUT /api/student/{id}`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**å®ç°ä½ç½®**: `StudentController.java:44`

---

#### 2.2.4 åˆ é™¤å­¦ç”Ÿ âœ…

**æ¥å£åœ°å€**: `DELETE /api/student/{id}`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**å®ç°ä½ç½®**: `StudentController.java:57`

**å·²å®ç°åŠŸèƒ½**:
- âœ… åŸºæœ¬åˆ é™¤åŠŸèƒ½
- âš ï¸ æœªæ›´æ–°ç­çº§å­¦ç”Ÿäººæ•°
- âš ï¸ æœªä½¿ç”¨è½¯åˆ é™¤

---

#### 2.2.5 å­¦ç”Ÿè¯¦æƒ… ğŸš§

**æ¥å£åœ°å€**: `GET /api/student/{id}`

**å®ç°çŠ¶æ€**: ğŸš§ æœªå®ç°

---

#### 2.2.6 å­¦ç”Ÿå®¶é•¿å…³è” ğŸš§

**æ¥å£åœ°å€**: `POST /api/student/{id}/parent`

**å®ç°çŠ¶æ€**: ğŸš§ æœªå®ç°

**æœªå®ç°åŸå› **:
- âš ï¸ æœªåˆ›å»º `Parent` å®ä½“ç±»
- âš ï¸ éœ€è¦æ“ä½œ `edu_student_parent` å…³è”è¡¨

---

### 2.3 ç­çº§ç®¡ç†æ¥å£

#### 2.3.1 ç­çº§åˆ—è¡¨æŸ¥è¯¢ âœ…

**æ¥å£åœ°å€**: `GET /api/class/list`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**å®ç°ä½ç½®**: `ClassesController.java:16`

**å·²å®ç°åŠŸèƒ½**:
- âœ… åŸºæœ¬åˆ—è¡¨æŸ¥è¯¢
- âš ï¸ æœªå…³è”æŸ¥è¯¢å¹´çº§ã€ç­ä¸»ä»»ä¿¡æ¯
- âš ï¸ æœªæ˜¾ç¤ºå½“å‰å­¦ç”Ÿäººæ•°
- âš ï¸ æœªå®ç°åˆ†é¡µåŠŸèƒ½

---

#### 2.3.2 æ·»åŠ ç­çº§ âœ…

**æ¥å£åœ°å€**: `POST /api/class`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**å®ç°ä½ç½®**: `ClassesController.java:20`

**å·²å®ç°åŠŸèƒ½**:
- âœ… åŸºæœ¬ä¿¡æ¯æ·»åŠ 
- âš ï¸ æœªå®ç°ç­çº§ç¼–å·å”¯ä¸€æ€§éªŒè¯
- âš ï¸ æœªéªŒè¯ç­ä¸»ä»»æ˜¯å¦å·²æ‹…ä»»å…¶ä»–ç­çº§ç­ä¸»ä»»
- âš ï¸ æœªéªŒè¯æ•™å®¤æ˜¯å¦è¢«å ç”¨

---

#### 2.3.3 ä¿®æ”¹ç­çº§ âœ…

**æ¥å£åœ°å€**: `PUT /api/class/{id}`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**å®ç°ä½ç½®**: `ClassesController.java:28`

---

#### 2.3.4 åˆ é™¤ç­çº§ âœ…

**æ¥å£åœ°å€**: `DELETE /api/class/{id}`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**å®ç°ä½ç½®**: `ClassesController.java:24`

**å·²å®ç°åŠŸèƒ½**:
- âœ… åŸºæœ¬åˆ é™¤åŠŸèƒ½
- âš ï¸ æœªæ£€æŸ¥ç­çº§æ˜¯å¦æœ‰å­¦ç”Ÿ
- âš ï¸ æœªä½¿ç”¨è½¯åˆ é™¤

---

#### 2.3.5 ç­çº§è¯¦æƒ… ğŸš§

**æ¥å£åœ°å€**: `GET /api/class/{id}`

**å®ç°çŠ¶æ€**: ğŸš§ æœªå®ç°

---

#### 2.3.6 ç­çº§è¯¾ç¨‹è¡¨ ğŸš§

**æ¥å£åœ°å€**: `GET /api/class/{id}/schedule`

**å®ç°çŠ¶æ€**: ğŸš§ æœªå®ç°

---

#### 2.3.7 ç­çº§å­¦ç”Ÿåˆ—è¡¨ ğŸš§

**æ¥å£åœ°å€**: `GET /api/class/{id}/students`

**å®ç°çŠ¶æ€**: ğŸš§ æœªå®ç°

---

### 2.4 å¹´çº§ç®¡ç†æ¥å£

#### 2.4.1 å¹´çº§åˆ—è¡¨æŸ¥è¯¢ âœ…

**æ¥å£åœ°å€**: `GET /api/grade/**`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°ï¼ˆä»…æŸ¥è¯¢åŠŸèƒ½ï¼‰

**å®ç°ä½ç½®**: `GradeController.java:18`

**å·²å®ç°åŠŸèƒ½**:
- âœ… åŸºæœ¬åˆ—è¡¨æŸ¥è¯¢
- âš ï¸ è·¯å¾„ä½¿ç”¨äº† `**` é€šé…ç¬¦ï¼Œä¸è§„èŒƒ
- âš ï¸ æœªå®ç°åˆ†é¡µåŠŸèƒ½

---

#### 2.4.2 ~ 2.4.4 å¹´çº§å¢åˆ æ”¹æ¥å£ ğŸš§

**å®ç°çŠ¶æ€**: ğŸš§ æœªå®ç°

**æ¶‰åŠæ¥å£**:
- `POST /api/grade` - æ·»åŠ å¹´çº§
- `PUT /api/grade/{id}` - ä¿®æ”¹å¹´çº§
- `DELETE /api/grade/{id}` - åˆ é™¤å¹´çº§

---

### 2.5 ç§‘ç›®ç®¡ç†æ¥å£

#### 2.5.1 ~ 2.5.4 ç§‘ç›®ç›¸å…³æ¥å£ ğŸš§

**å®ç°çŠ¶æ€**: ğŸš§ **å®Œå…¨æœªå®ç°**

**æœªå®ç°åŸå› **:
- âš ï¸ æœªåˆ›å»º `Subject` å®ä½“ç±»
- âš ï¸ æœªåˆ›å»º `SubjectController`
- âš ï¸ æœªåˆ›å»º `SubjectService`

**æ¶‰åŠæ¥å£**:
- `GET /api/subject/list` - ç§‘ç›®åˆ—è¡¨
- `POST /api/subject` - æ·»åŠ ç§‘ç›®
- `PUT /api/subject/{id}` - ä¿®æ”¹ç§‘ç›®
- `DELETE /api/subject/{id}` - åˆ é™¤ç§‘ç›®

---

### 2.6 è¯¾ç¨‹ç®¡ç†æ¥å£

#### 2.6.1 ~ 2.6.4 è¯¾ç¨‹ç›¸å…³æ¥å£ ğŸš§

**å®ç°çŠ¶æ€**: ğŸš§ **å®Œå…¨æœªå®ç°**

**æœªå®ç°åŸå› **:
- âš ï¸ æœªåˆ›å»º `Course` å®ä½“ç±»
- âš ï¸ æœªåˆ›å»º `CourseController`
- âš ï¸ è¯¾ç¨‹æ¶‰åŠæ•™å¸ˆã€ç­çº§ã€ç§‘ç›®çš„å…³è”

**æ¶‰åŠæ¥å£**:
- `GET /api/course/list` - è¯¾ç¨‹åˆ—è¡¨
- `POST /api/course` - æ·»åŠ è¯¾ç¨‹
- `PUT /api/course/{id}` - ä¿®æ”¹è¯¾ç¨‹
- `DELETE /api/course/{id}` - åˆ é™¤è¯¾ç¨‹

---

### 2.7 æ’è¯¾ç®¡ç†æ¥å£

#### 2.7.1 ~ 2.7.3 æ’è¯¾ç›¸å…³æ¥å£ ğŸš§

**å®ç°çŠ¶æ€**: ğŸš§ **å®Œå…¨æœªå®ç°**

**æœªå®ç°åŸå› **:
- âš ï¸ æœªåˆ›å»º `Schedule` å®ä½“ç±»
- âš ï¸ æœªåˆ›å»º `ScheduleController`
- âš ï¸ æ’è¯¾æ¶‰åŠå¤æ‚çš„å†²çªæ£€æµ‹é€»è¾‘

**æ¶‰åŠæ¥å£**:
- `GET /api/schedule/list` - è¯¾ç¨‹è¡¨æŸ¥è¯¢
- `POST /api/schedule` - æ·»åŠ æ’è¯¾
- `PUT /api/schedule/{id}` - ä¿®æ”¹æ’è¯¾
- `DELETE /api/schedule/{id}` - åˆ é™¤æ’è¯¾

**å…³é”®åŠŸèƒ½**:
- æ•™å®¤å†²çªæ£€æµ‹ï¼ˆåŒä¸€æ—¶é—´æ®µæ•™å®¤ä¸èƒ½è¢«å ç”¨ï¼‰
- æ•™å¸ˆå†²çªæ£€æµ‹ï¼ˆåŒä¸€æ—¶é—´æ®µæ•™å¸ˆä¸èƒ½ä¸Šä¸¤èŠ‚è¯¾ï¼‰
- ç­çº§å†²çªæ£€æµ‹ï¼ˆåŒä¸€æ—¶é—´æ®µç­çº§ä¸èƒ½æœ‰ä¸¤èŠ‚è¯¾ï¼‰

---

## ä¸‰ã€ä¸šåŠ¡æµç¨‹æ¨¡å—

### 3.1 è¯·å‡ç”³è¯·æ¥å£

#### 3.1.1 æäº¤è¯·å‡ç”³è¯· âœ…

**æ¥å£åœ°å€**: `POST /api/leave`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**: å­¦ç”Ÿ/å®¶é•¿æäº¤è¯·å‡ç”³è¯·

**è¯·æ±‚å‚æ•°**:
```json
{
  "studentId": 1,
  "leaveType": 1,
  "startDate": "2024-11-20",
  "endDate": "2024-11-22",
  "leaveDays": 3,
  "reason": "æ„Ÿå†’å‘çƒ§ï¼Œéœ€è¦åœ¨å®¶ä¼‘æ¯",
  "proofFiles": ["http://example.com/proof1.jpg"]
}
```

**å®ç°ä½ç½®**: `LeaveController.java:23`

**å·²å®ç°åŠŸèƒ½**:
- âœ… æäº¤è¯·å‡ç”³è¯·
- âœ… ç”Ÿæˆè¯·å‡è®°å½•
- âš ï¸ å®¡æ‰¹æµç¨‹å¯èƒ½æœªå®Œå…¨å®ç°

---

#### 3.1.2 è¯·å‡è¯¦æƒ… âœ…

**æ¥å£åœ°å€**: `GET /api/leave/{id}`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**å®ç°ä½ç½®**: `LeaveController.java:32`

---

#### 3.1.3 æˆ‘çš„è¯·å‡è®°å½• âœ…

**æ¥å£åœ°å€**: `GET /api/leave/my`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°ï¼ˆæ”¯æŒåˆ†é¡µï¼‰

**è¯·æ±‚å‚æ•°**:
```
studentId=1&page=1&size=10
```

**å®ç°ä½ç½®**: `LeaveController.java:39`

---

#### 3.1.4 æ’¤å›è¯·å‡ âœ…

**æ¥å£åœ°å€**: `PUT /api/leave/{id}/cancel`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°

**å®ç°ä½ç½®**: `LeaveController.java:49`

---

#### 3.1.5 å¾…å®¡æ‰¹è¯·å‡åˆ—è¡¨ âœ…

**æ¥å£åœ°å€**: `GET /api/leave/pending`

**å®ç°çŠ¶æ€**: âœ… å·²å®ç°ï¼ˆæ”¯æŒåˆ†é¡µï¼‰

**è¯·æ±‚å‚æ•°**:
```
classId=1&page=1&size=10
```

**å®ç°ä½ç½®**: `LeaveController.java:58`

---

### 3.2 è°ƒè¯¾ç”³è¯·æ¥å£

#### 3.2.1 ~ 3.2.3 è°ƒè¯¾ç›¸å…³æ¥å£ ğŸš§

**å®ç°çŠ¶æ€**: ğŸš§ **å®Œå…¨æœªå®ç°**

**æœªå®ç°åŸå› **:
- âš ï¸ æœªåˆ›å»º `CourseChange` å®ä½“ç±»
- âš ï¸ æœªåˆ›å»º `CourseChangeController`
- âš ï¸ éœ€è¦å®ç°è¯¾è¡¨å˜æ›´é€»è¾‘

**æ¶‰åŠæ¥å£**:
- `POST /api/course-change/apply` - æäº¤è°ƒè¯¾ç”³è¯·
- `GET /api/course-change/list` - è°ƒè¯¾åˆ—è¡¨
- `GET /api/course-change/{id}` - è°ƒè¯¾è¯¦æƒ…

---

### 3.3 æ¢è¯¾ç”³è¯·æ¥å£

#### 3.3.1 ~ 3.3.3 æ¢è¯¾ç›¸å…³æ¥å£ ğŸš§

**å®ç°çŠ¶æ€**: ğŸš§ **å®Œå…¨æœªå®ç°**

**æœªå®ç°åŸå› **:
- âš ï¸ æœªåˆ›å»º `CourseSwap` å®ä½“ç±»
- âš ï¸ æœªåˆ›å»º `CourseSwapController`
- âš ï¸ éœ€è¦å®ç°ç›®æ ‡æ•™å¸ˆç¡®è®¤æœºåˆ¶

**æ¶‰åŠæ¥å£**:
- `POST /api/course-swap/apply` - æäº¤æ¢è¯¾ç”³è¯·
- `PUT /api/course-swap/{id}/confirm` - å¯¹æ–¹ç¡®è®¤
- `GET /api/course-swap/my` - æˆ‘çš„æ¢è¯¾è®°å½•

---

### 3.4 è°ƒç­ç”³è¯·æ¥å£

#### 3.4.1 ~ 3.4.2 è°ƒç­ç›¸å…³æ¥å£ ğŸš§

**å®ç°çŠ¶æ€**: ğŸš§ **å®Œå…¨æœªå®ç°**

**æœªå®ç°åŸå› **:
- âš ï¸ æœªåˆ›å»º `ClassTransfer` å®ä½“ç±»
- âš ï¸ æœªåˆ›å»º `ClassTransferController`
- âš ï¸ éœ€è¦å®ç°å¤šçº§å®¡æ‰¹æµç¨‹

**æ¶‰åŠæ¥å£**:
- `POST /api/class-transfer/apply` - æäº¤è°ƒç­ç”³è¯·
- `GET /api/class-transfer/{id}` - è°ƒç­è¯¦æƒ…

---

### 3.5 å®¡æ‰¹æµç¨‹æ¥å£

#### 3.5.1 ~ 3.5.5 å®¡æ‰¹ç›¸å…³æ¥å£ ğŸš§

**å®ç°çŠ¶æ€**: ğŸš§ **å®Œå…¨æœªå®ç°**

**æœªå®ç°åŸå› **:
- âš ï¸ æœªåˆ›å»º `Approval` å®ä½“ç±»
- âš ï¸ æœªåˆ›å»º `ApprovalController`
- âš ï¸ å®¡æ‰¹æµç¨‹å¼•æ“æœªå®ç°

**æ¶‰åŠæ¥å£**:
- `GET /api/approval/pending` - å¾…æˆ‘å®¡æ‰¹
- `GET /api/approval/{id}` - å®¡æ‰¹è¯¦æƒ…
- `POST /api/approval/{id}/submit` - æäº¤å®¡æ‰¹
- `GET /api/approval/my-records` - æˆ‘çš„å®¡æ‰¹è®°å½•
- `GET /api/approval/my-applications` - æˆ‘çš„ç”³è¯·è®°å½•

---

## é™„å½•

### A. é€šç”¨å“åº”æ ¼å¼

æ‰€æœ‰æ¥å£ç»Ÿä¸€ä½¿ç”¨ä»¥ä¸‹å“åº”æ ¼å¼ï¼š

```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": {}
}
```

**çŠ¶æ€ç è¯´æ˜**ï¼š
- `200` - æ“ä½œæˆåŠŸ
- `400` - è¯·æ±‚å‚æ•°é”™è¯¯
- `401` - æœªæˆæƒï¼ˆæœªç™»å½•æˆ–Tokenå¤±æ•ˆï¼‰
- `403` - æ— æƒé™è®¿é—®
- `404` - èµ„æºä¸å­˜åœ¨
- `500` - æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### B. åˆ†é¡µè¯·æ±‚å‚æ•°

æ‰€æœ‰åˆ†é¡µæ¥å£ç»Ÿä¸€ä½¿ç”¨ä»¥ä¸‹å‚æ•°ï¼š

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| pageNum æˆ– page | int | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| pageSize æˆ– size | int | å¦ | æ¯é¡µæ¡æ•°ï¼Œé»˜è®¤10 |

**åˆ†é¡µå“åº”æ ¼å¼**ï¼š
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": {
    "total": 100,
    "list": []
  }
}
```

---

### C. Tokenä½¿ç”¨è¯´æ˜

1. **è·å–Token**: è°ƒç”¨ç™»å½•æ¥å£è·å–JWT Token
2. **ä½¿ç”¨Token**: åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ  `Authorization: Bearer <token>`
3. **Tokenæœ‰æ•ˆæœŸ**: é»˜è®¤24å°æ—¶ï¼ˆå¯åœ¨é…ç½®æ–‡ä»¶ä¸­è°ƒæ•´ï¼‰
4. **Tokenåˆ·æ–°**: æš‚æœªå®ç°è‡ªåŠ¨åˆ·æ–°æœºåˆ¶

---

### D. æ•°æ®å­—å…¸

#### ç”¨æˆ·ç±»å‹ (user_type)
- `1` - ç®¡ç†å‘˜
- `2` - æ•™å¸ˆ
- `3` - å­¦ç”Ÿ
- `4` - å®¶é•¿

#### æ€§åˆ« (gender)
- `1` - ç”·
- `2` - å¥³

#### çŠ¶æ€ (status)
- `0` - ç¦ç”¨
- `1` - å¯ç”¨

#### è¯·å‡ç±»å‹ (leave_type)
- `1` - ç—…å‡
- `2` - äº‹å‡
- `3` - å…¶ä»–

#### å®¡æ‰¹çŠ¶æ€ (approval_status)
- `1` - å¾…å®¡æ‰¹
- `2` - å®¡æ‰¹ä¸­
- `3` - å·²é€šè¿‡
- `4` - å·²æ‹’ç»
- `5` - å·²æ’¤å›

#### ä¸šåŠ¡ç±»å‹ (business_type)
- `1` - è¯·å‡ç”³è¯·
- `2` - è°ƒè¯¾ç”³è¯·
- `3` - æ¢è¯¾ç”³è¯·
- `4` - è°ƒç­ç”³è¯·

---

### E. å¼€å‘ä¼˜å…ˆçº§å»ºè®®

æ ¹æ®ä¸šåŠ¡é‡è¦æ€§å’Œä¾èµ–å…³ç³»ï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºå®ç°ï¼š

**ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€åŠŸèƒ½**ï¼ˆä¼˜å…ˆçº§ï¼šé«˜ï¼‰
1. âœ… ç”¨æˆ·ç™»å½•/ç™»å‡º
2. ğŸš§ ç”¨æˆ·æ³¨å†Œ
3. ğŸš§ ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢
4. ğŸš§ è§’è‰²ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰
5. ğŸš§ èœå•ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ã€æ ‘å½¢ç»“æ„ï¼‰

**ç¬¬äºŒé˜¶æ®µï¼šæ•™åŠ¡æ ¸å¿ƒ**ï¼ˆä¼˜å…ˆçº§ï¼šé«˜ï¼‰
1. âœ… å¹´çº§ç®¡ç†ï¼ˆæŸ¥è¯¢å·²å®ç°ï¼Œå¢åˆ æ”¹å¾…å®ç°ï¼‰
2. ğŸš§ ç§‘ç›®ç®¡ç†
3. âœ… ç­çº§ç®¡ç†ï¼ˆåŸºæœ¬CRUDå·²å®ç°ï¼‰
4. âœ… æ•™å¸ˆç®¡ç†ï¼ˆåŸºæœ¬CRUDå·²å®ç°ï¼‰
5. âœ… å­¦ç”Ÿç®¡ç†ï¼ˆåŸºæœ¬CRUDå·²å®ç°ï¼‰

**ç¬¬ä¸‰é˜¶æ®µï¼šè¯¾ç¨‹æ’è¯¾**ï¼ˆä¼˜å…ˆçº§ï¼šä¸­ï¼‰
1. ğŸš§ è¯¾ç¨‹ç®¡ç†
2. ğŸš§ æ’è¯¾ç®¡ç†ï¼ˆå«å†²çªæ£€æµ‹ï¼‰
3. ğŸš§ è¯¾ç¨‹è¡¨æŸ¥è¯¢ï¼ˆæ•™å¸ˆè¯¾è¡¨ã€ç­çº§è¯¾è¡¨ï¼‰

**ç¬¬å››é˜¶æ®µï¼šä¸šåŠ¡æµç¨‹**ï¼ˆä¼˜å…ˆçº§ï¼šä¸­ï¼‰
1. ğŸš§ å®¡æ‰¹æµç¨‹å¼•æ“
2. âœ… è¯·å‡ç”³è¯·ï¼ˆåŸºæœ¬åŠŸèƒ½å·²å®ç°ï¼‰
3. ğŸš§ è°ƒè¯¾ç”³è¯·
4. ğŸš§ æ¢è¯¾ç”³è¯·
5. ğŸš§ è°ƒç­ç”³è¯·

**ç¬¬äº”é˜¶æ®µï¼šæ‰©å±•åŠŸèƒ½**ï¼ˆä¼˜å…ˆçº§ï¼šä½ï¼‰
1. ğŸš§ æˆç»©ç®¡ç†
2. ğŸš§ è€ƒå‹¤ç®¡ç†
3. ğŸš§ é€šçŸ¥å…¬å‘Š
4. ğŸš§ å®¶æ ¡äº’åŠ¨
5. ğŸš§ æ•°æ®ç»Ÿè®¡æŠ¥è¡¨

---

### F. æŠ€æœ¯å®ç°å»ºè®®

#### 1. å®ä½“ç±»åˆ›å»º
- æ‰€æœ‰å®ä½“ç±»ç»§æ‰¿ `BaseEntity`ï¼ˆåŒ…å«é€šç”¨å­—æ®µï¼šid, createdAt, updatedAt, isDeletedï¼‰
- ä½¿ç”¨ MyBatis-Plus æ³¨è§£ï¼ˆ@TableName, @TableId, @TableFieldï¼‰
- ä½¿ç”¨ Lombok æ³¨è§£ï¼ˆ@Data, @Accessors(chain = true)ï¼‰

#### 2. Controllerå±‚è§„èŒƒ
- ç»Ÿä¸€ä½¿ç”¨ `@RestController` æ³¨è§£
- ç»Ÿä¸€è¯·æ±‚è·¯å¾„å‰ç¼€ `/api/{æ¨¡å—å}`
- ç»Ÿä¸€è¿”å› `R` å¯¹è±¡ï¼ˆResultCodeæšä¸¾ï¼‰
- æ·»åŠ å‚æ•°æ ¡éªŒï¼ˆ@Valid, @NotNull, @NotBlankç­‰ï¼‰
- æ·»åŠ æƒé™æ³¨è§£ï¼ˆå¾…å®ç°ï¼‰

#### 3. Serviceå±‚è§„èŒƒ
- ç»§æ‰¿ `IService<T>`ï¼ˆMyBatis-Plusï¼‰
- å®ç°ç±»ç»§æ‰¿ `ServiceImpl<M, T>`
- å¤æ‚ä¸šåŠ¡é€»è¾‘æ·»åŠ äº‹åŠ¡æ³¨è§£ `@Transactional`

#### 4. ç¼“å­˜ç­–ç•¥
- ä½¿ç”¨Redisç¼“å­˜èœå•æ ‘
- ä½¿ç”¨Redisç¼“å­˜è§’è‰²æƒé™
- ä½¿ç”¨Rediså­˜å‚¨Tokené»‘åå•
- ä½¿ç”¨Redisç¼“å­˜åŸºç¡€æ•°æ®ï¼ˆå¹´çº§ã€ç§‘ç›®ç­‰ï¼‰

#### 5. å®¡æ‰¹æµç¨‹å¼•æ“è®¾è®¡
- ä½¿ç”¨è´£ä»»é“¾æ¨¡å¼å®ç°å¤šçº§å®¡æ‰¹
- ä½¿ç”¨çŠ¶æ€æœºæ¨¡å¼ç®¡ç†å®¡æ‰¹çŠ¶æ€æµè½¬
- æ”¯æŒåŠ¨æ€é…ç½®å®¡æ‰¹æµç¨‹
- è®°å½•æ¯ä¸ªå®¡æ‰¹èŠ‚ç‚¹çš„å®¡æ‰¹äººå’Œå®¡æ‰¹æ„è§

---

### G. å½“å‰å­˜åœ¨çš„é—®é¢˜

#### ğŸ› å·²çŸ¥BUG

1. **TeacherController.java:14** - `GET /api/teacher/{id}` æ¥å£å®ç°é”™è¯¯
   - é—®é¢˜ï¼šæ–¹æ³•ä½“è°ƒç”¨çš„æ˜¯ `teacherList()` è€Œä¸æ˜¯æ ¹æ®IDæŸ¥è¯¢
   - å½±å“ï¼šæ— æ³•æŸ¥è¯¢å•ä¸ªæ•™å¸ˆè¯¦æƒ…
   - ä¿®å¤å»ºè®®ï¼šä¿®æ”¹ä¸º `getTeacherById(id)` æ–¹æ³•è°ƒç”¨

2. **GradeController.java:18** - `GET /api/grade/**` ä½¿ç”¨äº†ä¸è§„èŒƒçš„é€šé…ç¬¦
   - é—®é¢˜ï¼šè·¯å¾„ä½¿ç”¨äº† `**` é€šé…ç¬¦
   - å½±å“ï¼šè·¯å¾„ä¸è§„èŒƒï¼Œå¯èƒ½å¯¼è‡´æ„å¤–çš„è·¯ç”±åŒ¹é…
   - ä¿®å¤å»ºè®®ï¼šæ”¹ä¸º `/api/grade/list`

#### âš ï¸ åŠŸèƒ½ç¼ºå¤±

1. **åˆ†é¡µåŠŸèƒ½ç¼ºå¤±**
   - æ•™å¸ˆåˆ—è¡¨ã€å­¦ç”Ÿåˆ—è¡¨ã€ç­çº§åˆ—è¡¨ã€å¹´çº§åˆ—è¡¨éƒ½æœªå®ç°åˆ†é¡µ
   - æ•°æ®é‡å¤§æ—¶å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜
   - å»ºè®®ï¼šç»Ÿä¸€å®ç°åˆ†é¡µåŠŸèƒ½

2. **å”¯ä¸€æ€§éªŒè¯ç¼ºå¤±**
   - æ•™å¸ˆç¼–å·ã€å­¦ç”Ÿå­¦å·ã€ç­çº§ç¼–å·ç­‰æœªåšå”¯ä¸€æ€§éªŒè¯
   - å¯èƒ½å¯¼è‡´é‡å¤æ•°æ®
   - å»ºè®®ï¼šåœ¨Serviceå±‚æ·»åŠ å”¯ä¸€æ€§éªŒè¯

3. **è½¯åˆ é™¤æœªå®ç°**
   - æ‰€æœ‰åˆ é™¤æ“ä½œéƒ½æ˜¯ç‰©ç†åˆ é™¤
   - æ— æ³•æ¢å¤è¯¯åˆ é™¤çš„æ•°æ®
   - å»ºè®®ï¼šæ”¹ä¸ºè½¯åˆ é™¤ï¼ˆæ›´æ–° is_deleted å­—æ®µï¼‰

4. **å…³è”æ•°æ®éªŒè¯ç¼ºå¤±**
   - åˆ é™¤æ•™å¸ˆæ—¶æœªæ£€æŸ¥æ˜¯å¦æ‹…ä»»ç­ä¸»ä»»
   - åˆ é™¤ç­çº§æ—¶æœªæ£€æŸ¥æ˜¯å¦æœ‰å­¦ç”Ÿ
   - å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´
   - å»ºè®®ï¼šæ·»åŠ å…³è”æ•°æ®éªŒè¯


- é¡¹ç›®æºç ï¼š`/src/main/java/com/example/primaryschoolmanagement/`


**æ–‡æ¡£ç»´æŠ¤**: è¯·åœ¨æ¯æ¬¡å®ç°æˆ–ä¿®æ”¹æ¥å£ååŠæ—¶æ›´æ–°æ­¤æ–‡æ¡£

**æœ€åæ›´æ–°æ—¶é—´**: 2025-11-19
**ç‰ˆæœ¬**: v2.2
**æ›´æ–°å†…å®¹**: æ–°å¢èœå•ç®¡ç†å®Œæ•´åŠŸèƒ½ï¼ˆ1.4ï¼‰ï¼ŒåŒ…å«èœå•æ ‘æŸ¥è¯¢ã€èœå•åˆ—è¡¨ã€èœå•è¯¦æƒ…ã€æ·»åŠ èœå•ã€ä¿®æ”¹èœå•ã€åˆ é™¤èœå•å…±6ä¸ªæ¥å£
