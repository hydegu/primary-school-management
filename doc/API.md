# 小学教务管理系统 - API接口文档

> **文档版本**: v1.1
> **最后更新**: 2025-11-20
> **基础URL**: `http://localhost:8082`

---

## 📖 快速导航

- [1. 认证模块](#1-认证模块)
- [2. 用户管理](#2-用户管理)
- [3. 菜单管理](#3-菜单管理)
- [4. 教师管理](#4-教师管理)
- [5. 学生管理](#5-学生管理)
- [6. 班级管理](#6-班级管理)
- [7. 年级管理](#7-年级管理)
- [8. 请假管理](#8-请假管理)
- [9. 调课管理](#9-调课管理)
- [10. 换课管理](#10-换课管理)
- [11. 调班管理](#11-调班管理)

---

## 1. 认证模块

### 1.1 用户登录

**接口说明**: 用户登录验证，成功后返回JWT Token

**请求信息**
- **请求方式**: `POST`
- **请求路径**: `/api/user/login`
- **是否需要认证**: 否

**请求参数**

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| identifier | String | 是 | 用户名/手机号/邮箱 | admin |
| password | String | 是 | 密码 | admin123 |

**请求示例**
```json
{
  "identifier": "admin",
  "password": "admin123"
}
```

**响应示例**
```json
{
  "code": 200,              // 状态码：200表示成功
  "msg": "操作成功",         // 消息：操作结果描述
  "data": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."  // JWT Token令牌，需保存用于后续请求
}
```

**错误码说明**

| 错误码 | 说明 |
|--------|------|
| 400 | 用户名或密码不能为空 |
| 401 | 用户名或密码错误 |
| 403 | 账号已被禁用 |
| 500 | 服务器内部错误 |

---

### 1.2 用户登出

**接口说明**: 用户登出，将Token加入黑名单

**请求信息**
- **请求方式**: `POST`
- **请求路径**: `/api/user/logout`
- **是否需要认证**: 是

**请求头**
```
Authorization: Bearer <token>
```

**响应示例**
```json
{
  "code": 200,           // 状态码：200表示成功
  "msg": "登出成功"       // 消息：操作结果描述
}
```

---

## 2. 用户管理

### 2.1 查询用户列表

**接口说明**: 查询用户列表，支持条件筛选和分页

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/users`
- **是否需要认证**: 是

**请求参数**

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| username | String | 否 | 用户名（模糊查询） | admin |
| realName | String | 否 | 真实姓名（模糊查询） | 张三 |
| userType | Integer | 否 | 用户类型：1-管理员 2-教师 3-学生 4-家长 | 2 |
| status | Integer | 否 | 状态：0-禁用 1-启用 | 1 |
| phone | String | 否 | 手机号（模糊查询） | 138 |
| email | String | 否 | 邮箱（模糊查询） | @example.com |
| page | Integer | 否 | 页码，默认1 | 1 |
| size | Integer | 否 | 每页条数，默认10 | 10 |

**响应示例**
```json
{
  "code": 200,              // 状态码：200表示成功
  "msg": "操作成功",         // 消息：操作结果描述
  "data": {
    "total": 100,           // 总记录数
    "records": [            // 用户列表数据
      {
        "id": 1,                        // 用户ID
        "username": "admin",            // 用户名（登录账号）
        "realName": "系统管理员",        // 真实姓名
        "userType": 1,                  // 用户类型：1-管理员 2-教师 3-学生 4-家长
        "avatar": "/uploads/avatars/2024/11/19/1_abc123.jpg",  // 头像URL地址
        "phone": "13800138000",         // 手机号
        "email": "admin@example.com",   // 邮箱地址
        "gender": 1,                    // 性别：1-男 2-女
        "status": 1,                    // 状态：0-禁用 1-启用
        "lastLoginTime": "2024-11-18 10:30:00",  // 最后登录时间
        "createdAt": "2024-01-01 00:00:00",      // 创建时间
        "updatedAt": "2024-11-18 10:30:00",      // 更新时间
        "roles": ["super_admin"]        // 角色列表
      }
    ],
    "page": 1,              // 当前页码
    "size": 10              // 每页条数
  }
}
```

---

### 2.2 添加用户

**接口说明**: 添加新用户，支持同时上传头像

**请求信息**
- **请求方式**: `POST`
- **请求路径**: `/api/users`
- **是否需要认证**: 是
- **请求格式**: `multipart/form-data`

**请求参数**

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| username | String | 是 | 登录账号，3-50字符，唯一 | teacher001 |
| password | String | 是 | 密码，6-20字符 | Pass@123 |
| realName | String | 是 | 真实姓名，1-50字符 | 张老师 |
| userType | Integer | 是 | 用户类型：1-管理员 2-教师 3-学生 4-家长 | 2 |
| avatarFile | File | 否 | 头像文件（JPG/PNG/GIF，最大5MB） | - |
| phone | String | 否 | 联系电话，11位手机号 | 13800138001 |
| email | String | 否 | 邮箱地址 | teacher@example.com |
| gender | Integer | 否 | 性别：1-男 2-女 | 1 |
| status | Integer | 否 | 状态：0-禁用 1-启用，默认1 | 1 |

**响应示例**
```json
{
  "code": 200,              // 状态码：200表示成功
  "msg": "操作成功",         // 消息：操作结果描述
  "data": {
    "id": 10,                       // 用户ID（新创建的用户ID）
    "username": "teacher001",       // 用户名（登录账号）
    "realName": "张老师",            // 真实姓名
    "userType": 2,                  // 用户类型：1-管理员 2-教师 3-学生 4-家长
    "avatar": "/uploads/avatars/2024/11/19/10_abc123.jpg",  // 头像URL地址
    "phone": "13800138001",         // 手机号
    "email": "teacher001@example.com",  // 邮箱地址
    "gender": 1,                    // 性别：1-男 2-女
    "status": 1,                    // 状态：0-禁用 1-启用
    "createdAt": "2024-11-19 10:00:00",  // 创建时间
    "updatedAt": "2024-11-19 10:00:00",  // 更新时间
    "roles": ["teacher"]            // 角色列表（已自动分配）
  }
}
```

**注意事项**
- 密码将使用BCrypt算法加密后存储
- 用户名、手机号、邮箱必须唯一
- 根据用户类型自动分配默认角色
- 头像文件支持JPG、PNG、GIF格式，最大5MB

---

### 2.3 修改用户

**接口说明**: 修改用户信息（不包括密码），支持更新头像

**请求信息**
- **请求方式**: `PUT`
- **请求路径**: `/api/users/{id}`
- **是否需要认证**: 是
- **请求格式**: `multipart/form-data`

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 用户ID |

**请求参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| realName | String | 否 | 真实姓名 |
| avatarFile | File | 否 | 头像文件（JPG/PNG/GIF，最大5MB） |
| phone | String | 否 | 联系电话 |
| email | String | 否 | 邮箱地址 |
| gender | Integer | 否 | 性别：1-男 2-女 |
| status | Integer | 否 | 状态：0-禁用 1-启用 |

**响应示例**
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": {
    "id": 10,
    "username": "teacher001",
    "realName": "李老师",
    "avatar": "/uploads/avatars/2024/11/19/10_def456.jpg",
    "updatedAt": "2024-11-19 11:00:00"
  }
}
```

**注意事项**
- 不允许修改username（登录账号）
- 不允许修改userType（用户类型）
- 密码修改使用专门的修改密码接口
- 上传新头像会自动替换旧头像

---

### 2.4 删除用户

**接口说明**: 删除用户（软删除）

**请求信息**
- **请求方式**: `DELETE`
- **请求路径**: `/api/users/{id}`
- **是否需要认证**: 是

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 用户ID |

**响应示例**
```json
{
  "code": 200,
  "msg": "删除成功"
}
```

**注意事项**
- 使用软删除，不物理删除数据
- 不允许删除超级管理员（ID=1）
- 删除后该用户无法登录

---

### 2.5 查询用户详情

**接口说明**: 查询用户详细信息，包括角色信息

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/users/{id}`
- **是否需要认证**: 是

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 用户ID |

**响应示例**
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": {
    "id": 10,
    "username": "teacher001",
    "realName": "张老师",
    "userType": 2,
    "avatar": "/uploads/avatars/2024/11/19/10_abc123.jpg",
    "phone": "13800138001",
    "email": "teacher001@example.com",
    "gender": 1,
    "status": 1,
    "lastLoginTime": "2024-11-19 09:30:00",
    "lastLoginIp": "192.168.1.100",
    "createdAt": "2024-11-01 10:00:00",
    "updatedAt": "2024-11-19 09:30:00",
    "roles": ["teacher"]
  }
}
```

---

### 2.6 分配角色

**接口说明**: 为用户分配一个或多个角色

**请求信息**
- **请求方式**: `POST`
- **请求路径**: `/api/users/{id}/roles`
- **是否需要认证**: 是

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 用户ID |

**请求参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| roleIds | Array | 是 | 角色ID数组 |

**请求示例**
```json
{
  "roleIds": [1, 2, 3]
}
```

**响应示例**
```json
{
  "code": 200,
  "msg": "角色分配成功"
}
```

---

### 2.7 查询用户角色

**接口说明**: 查询用户的角色列表

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/users/{id}/roles`
- **是否需要认证**: 是

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 用户ID |

**响应示例**
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": ["teacher", "class_monitor"]
}
```

---

## 3. 菜单管理

### 3.1 获取菜单树

**接口说明**: 获取系统菜单树形结构，用于渲染导航菜单

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/menu/tree`
- **是否需要认证**: 是

**响应示例**
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "id": 1,
      "menuName": "系统管理",
      "menuPath": "/system",
      "menuIcon": "system",
      "menuType": 1,          // 菜单类型：1-目录 2-菜单 3-按钮
      "parentId": 0,          // 父菜单ID（0表示顶级菜单）
      "sortOrder": 1,
      "children": [
        {
          "id": 2,
          "menuName": "用户管理",
          "menuPath": "/system/user",
          "menuIcon": "user",
          "menuType": 2,
          "parentId": 1,
          "sortOrder": 1,
          "children": []
        }
      ]
    }
  ]
}
```

---

### 3.2 获取菜单列表

**接口说明**: 获取所有菜单列表（扁平结构），用于下拉选择

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/menu/list`
- **是否需要认证**: 是

**响应示例**
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "id": 1,
      "menuName": "系统管理",
      "menuPath": "/system",
      "menuIcon": "system",
      "menuType": 1,
      "parentId": 0,
      "sortOrder": 1
    }
  ]
}
```

---

### 3.3 获取菜单详情

**接口说明**: 根据ID查询菜单详情

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/menu/{id}`
- **是否需要认证**: 是

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 菜单ID |

**响应示例**
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": {
    "id": 2,
    "menuName": "用户管理",
    "menuPath": "/system/user",
    "menuIcon": "user",
    "menuType": 2,
    "parentId": 1,
    "sortOrder": 1,
    "permission": "system:user:list"
  }
}
```

---

### 3.4 创建菜单

**接口说明**: 创建新菜单项（需要超级管理员权限）

**请求信息**
- **请求方式**: `POST`
- **请求路径**: `/api/menu`
- **是否需要认证**: 是
- **权限要求**: 超级管理员

**请求参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| menuName | String | 是 | 菜单名称 |
| menuPath | String | 否 | 菜单路径 |
| menuIcon | String | 否 | 菜单图标 |
| menuType | Integer | 是 | 菜单类型：1-目录 2-菜单 3-按钮 |
| parentId | Long | 否 | 父菜单ID，0表示顶级菜单 |
| sortOrder | Integer | 否 | 排序号，默认0 |
| permission | String | 否 | 权限标识 |

**请求示例**
```json
{
  "menuName": "教师管理",
  "menuPath": "/teacher",
  "menuIcon": "teacher",
  "menuType": 2,
  "parentId": 1,
  "sortOrder": 2,
  "permission": "system:teacher:list"
}
```

**响应示例**
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": {
    "id": 10,
    "menuName": "教师管理",
    "menuPath": "/teacher",
    "menuType": 2
  }
}
```

---

### 3.5 更新菜单

**接口说明**: 更新菜单信息（需要超级管理员权限）

**请求信息**
- **请求方式**: `PUT`
- **请求路径**: `/api/menu/{id}`
- **是否需要认证**: 是
- **权限要求**: 超级管理员

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 菜单ID |

**请求参数**: 同创建菜单接口

---

### 3.6 删除菜单

**接口说明**: 删除菜单项（软删除）

**请求信息**
- **请求方式**: `DELETE`
- **请求路径**: `/api/menu/{id}`
- **是否需要认证**: 是
- **权限要求**: 超级管理员

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 菜单ID |

**响应示例**
```json
{
  "code": 200,
  "msg": "删除成功"
}
```

**注意事项**
- 如果菜单下有子菜单，将无法删除
- 使用软删除方式

---

## 4. 教师管理

### 4.1 查询教师列表

**接口说明**: 查询教师列表，支持条件筛选

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/teacher/list`
- **是否需要认证**: 是

**请求参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| teacherName | String | 否 | 教师姓名（模糊查询） |
| teacherNo | String | 否 | 教师工号 |
| title | String | 否 | 职称 |

**响应示例**
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "id": 1,
      "teacherNo": "T001",
      "teacherName": "张老师",
      "gender": 1,
      "birthDate": "1985-03-15",
      "idCard": "110101198503150011",
      "phone": "13900139000",
      "email": "teacher001@school.com",
      "title": "数学教师",
      "hireDate": "2024-09-01"
    }
  ]
}
```

---

### 4.2 添加教师

**接口说明**: 添加新教师信息

**请求信息**
- **请求方式**: `POST`
- **请求路径**: `/api/teacher`
- **是否需要认证**: 是

**请求参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| teacherNo | String | 是 | 教师工号 |
| teacherName | String | 是 | 教师姓名 |
| gender | Integer | 是 | 性别：1-男 2-女 |
| birthDate | String | 否 | 出生日期 |
| idCard | String | 否 | 身份证号 |
| phone | String | 是 | 联系电话 |
| email | String | 否 | 邮箱 |
| title | String | 否 | 职称 |
| hireDate | String | 否 | 入职日期 |

**请求示例**
```json
{
  "teacherNo": "T100",
  "teacherName": "李老师",
  "gender": 1,
  "birthDate": "1985-03-15",
  "idCard": "110101198503150011",
  "phone": "13900139000",
  "email": "teacher100@school.com",
  "title": "数学教师",
  "hireDate": "2024-09-01"
}
```

**响应示例**
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": {
    "id": 10,
    "teacherNo": "T100",
    "teacherName": "李老师"
  }
}
```

---

### 4.3 修改教师

**接口说明**: 修改教师信息

**请求信息**
- **请求方式**: `PUT`
- **请求路径**: `/api/teacher/{id}`
- **是否需要认证**: 是

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 教师ID |

**请求参数**: 同添加教师接口

---

### 4.4 删除教师

**接口说明**: 删除教师

**请求信息**
- **请求方式**: `DELETE`
- **请求路径**: `/api/teacher/{id}`
- **是否需要认证**: 是

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 教师ID |

**响应示例**
```json
{
  "code": 200,
  "msg": "删除成功"
}
```

---

### 4.5 查询教师详情

**接口说明**: 根据教师ID查询详细信息

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/teacher/{id}`
- **是否需要认证**: 是

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 教师ID |

**响应示例**
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": {
    "id": 1,
    "teacherNo": "T001",
    "teacherName": "张老师",
    "gender": 1,
    "birthDate": "1985-03-15",
    "phone": "13900139000",
    "email": "teacher001@school.com",
    "title": "数学教师",
    "hireDate": "2024-09-01"
  }
}
```

---

## 5. 学生管理

### 5.1 查询学生列表

**接口说明**: 查询学生列表，支持条件筛选

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/student/list`
- **是否需要认证**: 是

**响应示例**
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "id": 1,
      "studentNo": "S2024001",
      "studentName": "小明",
      "gender": 1,
      "birthDate": "2016-05-20",
      "gradeId": 1,
      "classId": 1,
      "parentPhone": "13800138000"
    }
  ]
}
```

---

### 5.2 添加学生

**接口说明**: 添加新学生

**请求信息**
- **请求方式**: `POST`
- **请求路径**: `/api/student`
- **是否需要认证**: 是

**请求参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| studentNo | String | 是 | 学号 |
| studentName | String | 是 | 学生姓名 |
| gender | Integer | 是 | 性别：1-男 2-女 |
| birthDate | String | 否 | 出生日期 |
| idCard | String | 否 | 身份证号 |
| gradeId | Long | 否 | 年级ID |
| classId | Long | 否 | 班级ID |
| parentPhone | String | 否 | 家长电话 |

**请求示例**
```json
{
  "studentNo": "S2024001",
  "studentName": "小明",
  "gender": 1,
  "birthDate": "2016-05-20",
  "idCard": "110101201605200011",
  "gradeId": 1,
  "classId": 1,
  "parentPhone": "13800138000"
}
```

---

### 5.3 修改学生

**接口说明**: 修改学生信息

**请求信息**
- **请求方式**: `PUT`
- **请求路径**: `/api/student/{id}`
- **是否需要认证**: 是

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 学生ID |

**请求参数**: 同添加学生接口

---

### 5.4 删除学生

**接口说明**: 删除学生

**请求信息**
- **请求方式**: `DELETE`
- **请求路径**: `/api/student/{id}`
- **是否需要认证**: 是

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 学生ID |

**响应示例**
```json
{
  "code": 200,
  "msg": "删除成功"
}
```

---

## 6. 班级管理

### 6.1 查询班级列表

**接口说明**: 查询班级列表

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/class/list`
- **是否需要认证**: 是

**响应示例**
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "id": 1,
      "className": "一年级1班",
      "gradeId": 1,
      "headTeacherId": 1,
      "classroom": "101教室",
      "maxStudents": 40
    }
  ]
}
```

---

### 6.2 添加班级

**接口说明**: 添加新班级

**请求信息**
- **请求方式**: `POST`
- **请求路径**: `/api/class`
- **是否需要认证**: 是

---

### 6.3 修改班级

**接口说明**: 修改班级信息

**请求信息**
- **请求方式**: `PUT`
- **请求路径**: `/api/class/{id}`
- **是否需要认证**: 是

---

### 6.4 删除班级

**接口说明**: 删除班级

**请求信息**
- **请求方式**: `DELETE`
- **请求路径**: `/api/class/{id}`
- **是否需要认证**: 是

---

## 7. 年级管理

### 7.1 查询年级列表

**接口说明**: 查询所有年级列表

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/grade/list`
- **是否需要认证**: 是

**响应示例**
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "id": 1,
      "gradeName": "一年级",
      "gradeLevel": 1
    },
    {
      "id": 2,
      "gradeName": "二年级",
      "gradeLevel": 2
    }
  ]
}
```

---

## 8. 请假管理

### 8.1 提交请假申请

**接口说明**: 学生/家长提交请假申请

**请求信息**
- **请求方式**: `POST`
- **请求路径**: `/api/leave`
- **是否需要认证**: 是

**请求参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| studentId | Long | 是 | 学生ID |
| leaveType | Integer | 是 | 请假类型：1-病假 2-事假 3-其他 |
| startDate | String | 是 | 开始日期 |
| endDate | String | 是 | 结束日期 |
| leaveDays | Integer | 是 | 请假天数 |
| reason | String | 是 | 请假原因 |
| proofFiles | Array | 否 | 证明文件URL数组 |

**请求示例**
```json
{
  "studentId": 1,
  "leaveType": 1,
  "startDate": "2024-11-20",
  "endDate": "2024-11-22",
  "leaveDays": 3,
  "reason": "感冒发烧，需要在家休息",
  "proofFiles": ["http://example.com/proof1.jpg"]
}
```

---

### 8.2 查询请假详情

**接口说明**: 查询请假申请详情

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/leave/{id}`
- **是否需要认证**: 是

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 请假申请ID |

---

### 8.3 我的请假记录

**接口说明**: 查询当前学生的请假记录（支持分页）

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/leave/my`
- **是否需要认证**: 是

**请求参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| studentId | Long | 是 | 学生ID |
| page | Integer | 否 | 页码 |
| size | Integer | 否 | 每页条数 |

**响应示例**
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": {
    "records": [
      {
        "id": 1,
        "leaveType": 1,
        "startDate": "2024-11-20",
        "endDate": "2024-11-22",
        "leaveDays": 3,
        "reason": "感冒发烧",
        "approvalStatus": 1
      }
    ],
    "total": 20,
    "size": 10,
    "current": 1
  }
}
```

---

### 8.4 撤回请假

**接口说明**: 撤回请假申请

**请求信息**
- **请求方式**: `PUT`
- **请求路径**: `/api/leave/{id}/cancel`
- **是否需要认证**: 是

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 请假申请ID |

---

### 8.5 待审批列表

**接口说明**: 查询待审批的请假列表（教师/管理员使用）

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/leave/pending`
- **是否需要认证**: 是

**请求参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| classId | Long | 否 | 班级ID |
| page | Integer | 否 | 页码 |
| size | Integer | 否 | 每页条数 |

---

## 9. 调课管理

### 9.1 提交调课申请

**接口说明**: 教师提交调课申请

**请求信息**
- **请求方式**: `POST`
- **请求路径**: `/api/course-change`
- **是否需要认证**: 是

**请求参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| scheduleId | Long | 是 | 原课程ID |
| originalDate | String | 是 | 原上课日期 |
| newDate | String | 是 | 调整后日期 |
| reason | String | 是 | 调课原因 |

**请求示例**
```json
{
  "scheduleId": 123,
  "originalDate": "2024-11-20",
  "newDate": "2024-11-21",
  "reason": "临时有事需要调整课程时间"
}
```

**响应示例**
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": 1   // 调课申请ID
}
```

---

### 9.2 查询调课详情

**接口说明**: 查询调课申请详情

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/course-change/{id}`
- **是否需要认证**: 是

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 调课申请ID |

---

### 9.3 我的调课记录

**接口说明**: 查询当前教师的调课申请记录（支持分页）

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/course-change/my`
- **是否需要认证**: 是

**请求参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| teacherId | Long | 是 | 教师ID |
| page | Integer | 否 | 页码 |
| size | Integer | 否 | 每页条数 |

---

## 10. 换课管理

### 10.1 提交换课申请

**接口说明**: 教师提交换课申请（与另一位教师交换课程）

**请求信息**
- **请求方式**: `POST`
- **请求路径**: `/api/course-swap`
- **是否需要认证**: 是

**请求参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| myScheduleId | Long | 是 | 我的课程ID |
| targetScheduleId | Long | 是 | 目标课程ID |
| targetTeacherId | Long | 是 | 目标教师ID |
| reason | String | 是 | 换课原因 |

**请求示例**
```json
{
  "myScheduleId": 123,
  "targetScheduleId": 456,
  "targetTeacherId": 20,
  "reason": "时间冲突，需要与李老师换课"
}
```

---

### 10.2 确认换课

**接口说明**: 目标教师确认或拒绝换课申请

**请求信息**
- **请求方式**: `PUT`
- **请求路径**: `/api/course-swap/{id}/confirm`
- **是否需要认证**: 是

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 换课申请ID |

**请求参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| confirm | Boolean | 是 | true-同意 false-拒绝 |

---

### 10.3 我的换课记录

**接口说明**: 查询当前教师的换课申请记录（支持分页）

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/course-swap/my`
- **是否需要认证**: 是

**请求参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| teacherId | Long | 是 | 教师ID |
| page | Integer | 否 | 页码 |
| size | Integer | 否 | 每页条数 |

---

## 11. 调班管理

### 11.1 提交调班申请

**接口说明**: 家长/学生提交调班申请

**请求信息**
- **请求方式**: `POST`
- **请求路径**: `/api/class-transfer`
- **是否需要认证**: 是

**请求参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| studentId | Long | 是 | 学生ID |
| currentClassId | Long | 是 | 当前班级ID |
| targetClassId | Long | 是 | 目标班级ID |
| reason | String | 是 | 调班原因 |

**请求示例**
```json
{
  "studentId": 100,
  "currentClassId": 1,
  "targetClassId": 2,
  "reason": "家庭住址变更，申请转到离家更近的班级"
}
```

---

### 11.2 查询调班详情

**接口说明**: 查询调班申请详情

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/class-transfer/{id}`
- **是否需要认证**: 是

**路径参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 调班申请ID |

---

### 11.3 我的调班记录

**接口说明**: 查询当前学生的调班申请记录（支持分页）

**请求信息**
- **请求方式**: `GET`
- **请求路径**: `/api/class-transfer/my`
- **是否需要认证**: 是

**请求参数**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| studentId | Long | 是 | 学生ID |
| page | Integer | 否 | 页码 |
| size | Integer | 否 | 每页条数 |

---

## 📝 附录

### 通用说明

**认证方式**
- 除登录接口外，所有接口都需要在请求头中携带Token
- 请求头格式: `Authorization: Bearer <token>`

**通用响应格式**
```json
{
  "code": 200,        // 状态码
  "msg": "操作成功",   // 消息
  "data": {}          // 数据
}
```

**HTTP状态码**
- 200: 请求成功
- 400: 请求参数错误
- 401: 未登录或Token失效
- 403: 无权限访问
- 404: 资源不存在
- 500: 服务器内部错误

**相关文档**
- [数据字典](./DATA_DICTIONARY.md) - 枚举值、状态码说明
- [前端对接规范](./FRONTEND_GUIDE.md) - 认证流程、拦截器配置

---

> 💡 **提示**: 如有疑问或发现文档错误，请联系后端团队
